# ===============================
# üöÄ QIVO Backend - Render Deploy
# ===============================
# Este arquivo instrui o Render sobre como construir e rodar o backend Flask.
# Ele ignora o frontend React/Vite e usa apenas a raiz onde est√° o wsgi.py.

services:
  - type: web
    name: qivo-backend
    env: python
    plan: free                         # ou "starter" se quiser mais performance
    region: oregon                     # pode ajustar se quiser outra regi√£o
    branch: main
    rootDir: .                         # raiz do projeto (onde est√° wsgi.py)

    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      flask db upgrade || true

    startCommand: gunicorn wsgi:app -b 0.0.0.0:10000

    envVars:
      - key: FLASK_APP
        value: wsgi:app
      - key: FLASK_ENV
        value: production
      - key: PORT
        value: 10000
      - key: DATABASE_URL
        value: sqlite:///compliance.db
      - key: OPENAI_API_KEY
        sync: false   # define manualmente no painel Render (por seguran√ßa)
