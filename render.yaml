services:
  # Web Service Principal
  - type: web
    name: compliancecore-mining
    runtime: node
    region: oregon
    plan: starter
    branch: main
    buildCommand: pnpm install --frozen-lockfile && pnpm build
    startCommand: pnpm start
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: JWT_SECRET
        generateValue: true
      - key: OAUTH_SERVER_URL
        value: https://api.manus.im
      - key: VITE_APP_TITLE
        value: ComplianceCore Miningâ„¢
      - key: AWS_ACCESS_KEY_ID
        value: AKlA2JhVOSP76ICZGbM43
      - key: AWS_SECRET_ACCESS_KEY
        value: cra8al/2o8wVATdv9dw3lavtZgoKNKjHtmjteei
      - key: S3_BUCKET
        value: jorc-intelligence-storage
      - key: S3_REGION
        value: sa-east-1
      - key: S3_PUBLIC_BASE
        value: https://jorc-intelligence-storage.s3.sa-east-1.amazonaws.com
      - key: STRIPE_PUBLISHABLE_KEY
        value: pk_live_51RU504GwHsvLMl1xq6GRT5QlQq6anhkuJkU19KGLxLYwBbPkc3cK2pw6kl197BclOz24MzgzsOqhMxilZx198b2b00S1yQejy
      - key: DB_URL
        fromDatabase:
          name: compliancecore-db
          property: connectionString

databases:
  # MySQL Database
  - name: compliancecore-db
    databaseName: compliancecore
    plan: starter
    region: oregon

