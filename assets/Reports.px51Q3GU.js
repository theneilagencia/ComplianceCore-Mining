import{j as e}from"./ui.CMOn6A-A.js";import{u as b,a}from"./vendor.DqptLLSw.js";import{u as R}from"./useApi.DSWxbJm1.js";import{u as j}from"./index.DqphIITB.js";import"./trpc.DEyng-9d.js";import"./icons.2ttFni2B.js";function L(){const[,s]=b(),{apiFetch:x}=R(),{logout:p,user:f}=j(),[r,m]=a.useState([]),[g,l]=a.useState(!0),[c,i]=a.useState("");a.useEffect(()=>{n()},[]);const n=async()=>{try{l(!0),i("");const o=await(await x("/api/reports")).json();m(o.reports||[])}catch(t){i(t.message||"Não foi possível carregar os relatórios. Tente novamente.")}finally{l(!1)}},d=()=>{s("/reports/create")},h=t=>({draft:"bg-[#171a4a] text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",published:"bg-purple-100 text-purple-800"})[t]||"bg-[#171a4a] text-gray-800",u=t=>({draft:"Rascunho",in_progress:"Em Progresso",completed:"Concluído",published:"Publicado"})[t]||t;return g?e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:68",className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:69",className:"text-center",children:[e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:70",className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto"}),e.jsx("p",{"data-loc":"client/src/pages/Reports.tsx:71",className:"mt-6 text-lg font-medium text-gray-300",children:"Carregando relatórios..."}),e.jsx("p",{"data-loc":"client/src/pages/Reports.tsx:72",className:"mt-2 text-sm text-gray-500",children:"Aguarde um momento"})]})}):e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:79",className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:81",className:"bg-white/5 shadow-sm border-b border-white/20",children:e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:82",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:83",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:84",className:"flex items-center gap-4",children:[e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:85",className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"JI"}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:88",children:[e.jsx("h1",{"data-loc":"client/src/pages/Reports.tsx:89",className:"text-2xl font-bold text-white",children:"Relatórios Técnicos"}),e.jsx("p",{"data-loc":"client/src/pages/Reports.tsx:90",className:"text-sm text-gray-400",children:"Gerencie seus relatórios JORC e NI 43-101"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:93",className:"flex gap-3",children:[e.jsx("button",{"data-loc":"client/src/pages/Reports.tsx:94",onClick:()=>s("/dashboard"),className:"px-4 py-2 text-gray-300 hover:text-white font-medium transition-colors border border-white/20 rounded-lg hover:bg-[#000020]",children:"Voltar ao Dashboard"}),e.jsx("button",{"data-loc":"client/src/pages/Reports.tsx:100",onClick:()=>{p(),s("/login")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]})]})})}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:115",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c&&e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:117",className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx("svg",{"data-loc":"client/src/pages/Reports.tsx:118",className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{"data-loc":"client/src/pages/Reports.tsx:119",fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:121",className:"flex-1",children:[e.jsx("p",{"data-loc":"client/src/pages/Reports.tsx:122",className:"text-red-800 font-medium",children:c}),e.jsx("button",{"data-loc":"client/src/pages/Reports.tsx:123",onClick:n,className:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium underline",children:"Tentar novamente"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:134",className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:135",children:[e.jsx("h2",{"data-loc":"client/src/pages/Reports.tsx:136",className:"text-xl font-semibold text-white",children:"Meus Relatórios"}),e.jsxs("p",{"data-loc":"client/src/pages/Reports.tsx:137",className:"text-sm text-gray-400 mt-1",children:[r.length," relatórios encontrados"]})]}),e.jsx("button",{"data-loc":"client/src/pages/Reports.tsx:139",onClick:d,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all font-medium flex items-center gap-2",children:"+ Novo Relatório"})]}),r.length===0?e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:149",className:"bg-white/5 rounded-xl shadow-sm border border-white/20 p-12 text-center",children:[e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:150",className:"w-16 h-16 bg-[#171a4a] rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{"data-loc":"client/src/pages/Reports.tsx:151",className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"data-loc":"client/src/pages/Reports.tsx:152",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{"data-loc":"client/src/pages/Reports.tsx:155",className:"text-lg font-semibold text-white mb-2",children:"Nenhum relatório encontrado"}),e.jsx("p",{"data-loc":"client/src/pages/Reports.tsx:156",className:"text-gray-400 mb-6",children:"Comece criando seu primeiro relatório técnico"}),e.jsx("button",{"data-loc":"client/src/pages/Reports.tsx:157",onClick:d,className:"px-6 py-2 bg-[#2f2c79] text-white rounded-lg hover:bg-[#b96e48] transition-colors",children:"Criar Primeiro Relatório"})]}):e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:165",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(t=>e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:167",className:"bg-white/5 rounded-xl shadow-sm border border-white/20 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s(`/reports/${t.id}/edit`),children:[e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:172",className:"flex items-start justify-between mb-4",children:[e.jsx("div",{"data-loc":"client/src/pages/Reports.tsx:173",className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/pages/Reports.tsx:174",className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"data-loc":"client/src/pages/Reports.tsx:175",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("span",{"data-loc":"client/src/pages/Reports.tsx:178",className:`px-3 py-1 rounded-full text-xs font-medium ${h(t.status)}`,children:u(t.status)})]}),e.jsx("h3",{"data-loc":"client/src/pages/Reports.tsx:182",className:"text-lg font-semibold text-white mb-2",children:t.title}),e.jsxs("p",{"data-loc":"client/src/pages/Reports.tsx:183",className:"text-sm text-gray-400 mb-4",children:["Tipo: ",t.type]}),e.jsxs("div",{"data-loc":"client/src/pages/Reports.tsx:184",className:"text-xs text-gray-500",children:[e.jsxs("p",{"data-loc":"client/src/pages/Reports.tsx:185",children:["Criado: ",new Date(t.createdAt).toLocaleDateString("pt-BR")]}),e.jsxs("p",{"data-loc":"client/src/pages/Reports.tsx:186",children:["Atualizado: ",new Date(t.updatedAt).toLocaleDateString("pt-BR")]})]})]},t.id))})]})]})}export{L as default};
