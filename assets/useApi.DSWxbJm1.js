import{u as i}from"./index.DqphIITB.js";function p(){const{logout:r}=i();return{apiFetch:async(o,n={})=>{const{requireAuth:u=!0,...t}=n,a={"Content-Type":"application/json",...t.headers||{}};try{const e=await fetch(o,{...t,headers:a,credentials:"include"});if(e.status===401)throw r(),window.location.href="/login",new Error("Sessão expirada. Faça login novamente.");if(!e.ok){const s=await e.json().catch(()=>({}));throw new Error(s.error||`Erro ${e.status}: ${e.statusText}`)}return e}catch(e){throw e.message==="Failed to fetch"?new Error("Erro de conexão. Verifique sua internet e tente novamente."):e}}}}export{p as u};
