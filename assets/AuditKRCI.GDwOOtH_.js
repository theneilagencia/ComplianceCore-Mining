import{j as e,c as _,P as E}from"./ui.CMOn6A-A.js";import{a as u}from"./vendor.DqptLLSw.js";import{f as H,t as w,e as R,D as G,a as X,b as Q,c as W,d as J,B as C,C as m,k as g,l as A,m as x,A as Y,n as Z,o as f,g as b}from"./index.DqphIITB.js";import{T as ee,a as se,b as P,c as S}from"./tabs.DuG8Uxxk.js";import{D as te}from"./DashboardLayout.BMyonFam.js";import{p as j,F as $,L as N,n as ae,w as D,a as y,x as le,j as ce,y as T,T as oe,e as re,d as de}from"./icons.2ttFni2B.js";import"./trpc.DEyng-9d.js";var U="Progress",M=100,[ie]=_(U),[ne,ue]=ie(U),V=u.forwardRef((t,a)=>{const{__scopeProgress:l,value:c=null,max:r,getValueLabel:d=pe,...h}=t;(r||r===0)&&!F(r)&&console.error(me(`${r}`,"Progress"));const i=F(r)?r:M;c!==null&&!k(c,i)&&console.error(xe(`${c}`,"Progress"));const o=k(c,i)?c:null,I=v(o)?d(o,i):void 0;return e.jsx(ne,{scope:l,value:o,max:i,children:e.jsx(E.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":v(o)?o:void 0,"aria-valuetext":I,role:"progressbar","data-state":B(o,i),"data-value":o??void 0,"data-max":i,...h,ref:a})})});V.displayName=U;var L="ProgressIndicator",z=u.forwardRef((t,a)=>{const{__scopeProgress:l,...c}=t,r=ue(L,l);return e.jsx(E.div,{"data-state":B(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...c,ref:a})});z.displayName=L;function pe(t,a){return`${Math.round(t/a*100)}%`}function B(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function v(t){return typeof t=="number"}function F(t){return v(t)&&!isNaN(t)&&t>0}function k(t,a){return v(t)&&!isNaN(t)&&t<=a&&t>=0}function me(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${M}\`.`}function xe(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${M} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var he=V,ge=z;function Ae({className:t,value:a,...l}){return e.jsx(he,{"data-loc":"client/src/components/ui/progress.tsx:12","data-slot":"progress",className:H("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...l,children:e.jsx(ge,{"data-loc":"client/src/components/ui/progress.tsx:20","data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function Ce({isOpen:t,onClose:a,onUploadComplete:l}){const[c,r]=u.useState(null),[d,h]=u.useState(!1),i=w.technicalReports.uploadsV2.upload.useMutation(),o=u.useCallback(p=>{const s=p.target.files?.[0];if(s){if(s.type!=="application/pdf"){R.error("Tipo de arquivo invÃ¡lido",{description:"Por favor, selecione um arquivo PDF"});return}r(s)}},[]),I=u.useCallback(async()=>{if(c){h(!0);try{console.log("[AuditUploadModal] Starting upload...");const p=await i.mutateAsync({file:c,fileName:c.name});console.log("[AuditUploadModal] Upload completed:",p.reportId),R.success("Upload concluÃ­do!",{description:"Iniciando auditoria...",duration:2e3}),r(null),h(!1),a(),setTimeout(()=>{l(p.reportId)},300)}catch(p){console.error("[AuditUploadModal] Upload failed:",p),h(!1),R.error("Erro no upload",{description:p.message||"Tente novamente",duration:5e3})}}},[c,i,a,l]),K=u.useCallback(()=>{d||(r(null),a())},[d,a]);return e.jsx(G,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:96",open:t,onOpenChange:K,children:e.jsxs(X,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:97",className:"sm:max-w-md",children:[e.jsxs(Q,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:98",children:[e.jsx(W,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:99",children:"Upload de RelatÃ³rio para Auditoria"}),e.jsx(J,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:100",children:"Selecione um arquivo PDF para anÃ¡lise de conformidade KRCI"})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:105",className:"space-y-4",children:[c?e.jsx("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:127",className:"border border-gray-300 rounded-lg p-4",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:128",className:"flex items-center space-x-3",children:[e.jsx($,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:129",className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:130",className:"flex-1 min-w-0",children:[e.jsx("p",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:131",className:"text-sm font-medium text-gray-900 truncate",children:c.name}),e.jsxs("p",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:134",className:"text-sm text-gray-500",children:[(c.size/1024/1024).toFixed(2)," MB"]})]}),d&&e.jsx(N,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:139",className:"h-5 w-5 animate-spin text-blue-600"}),!d&&e.jsx(ae,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:142",className:"h-5 w-5 text-green-600"})]})}):e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:107",className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(j,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:108",className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("label",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:109",htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx("span",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:110",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Selecione um arquivo PDF"}),e.jsx("input",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:113",id:"file-upload",type:"file",accept:".pdf",className:"hidden",onChange:o,disabled:d})]}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:122",className:"text-sm text-gray-500 mt-2",children:"Apenas arquivos PDF sÃ£o aceitos"})]}),d&&e.jsx("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:149",className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:150",className:"flex items-center space-x-3",children:[e.jsx(N,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:151",className:"h-5 w-5 animate-spin text-blue-600"}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:152",children:[e.jsx("p",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:153",className:"text-sm font-medium text-blue-900",children:"Processando..."}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:156",className:"text-xs text-blue-700",children:"Fazendo upload e anÃ¡lise do documento"})]})]})}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:164",className:"flex space-x-3",children:[e.jsx(C,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:165",variant:"outline",onClick:K,disabled:d,className:"flex-1",children:"Cancelar"}),e.jsx(C,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:173",onClick:I,disabled:!c||d,className:"flex-1",children:d?e.jsxs(e.Fragment,{children:[e.jsx(N,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:180",className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{"data-loc":"client/src/modules/technical-reports/components/AuditUploadModal.tsx:185",className:"mr-2 h-4 w-4"}),"Iniciar Upload"]})})]})]})]})})}function ve(){console.log("[AuditKRCI v3.0] Component mounted");const[t,a]=u.useState(!1),[l,c]=u.useState(null),[r,d]=u.useState(!1),[h,i]=u.useState("upload"),o=w.technicalReports.audit.list.useQuery({limit:20},{refetchOnWindowFocus:!1,refetchInterval:!1}),I=w.technicalReports.audit.run.useMutation({onMutate:()=>{console.log("[AuditKRCI v3.0] Starting audit..."),d(!0)},onSuccess:s=>{console.log("[AuditKRCI v3.0] Audit completed successfully:",s),c(s),d(!1),o.refetch(),R.success("âœ… Auditoria ConcluÃ­da!",{description:`Score: ${s.score}% | ${s.passedRules}/${s.totalRules} critÃ©rios atendidos`,duration:5e3}),setTimeout(()=>{const n=document.getElementById("audit-results-section");n&&n.scrollIntoView({behavior:"smooth",block:"start"})},300)},onError:s=>{console.error("[AuditKRCI v3.0] Audit failed:",s),d(!1),R.error("âŒ Erro na Auditoria",{description:s.message||"Tente novamente em alguns instantes",duration:5e3})}}),K=s=>{console.log("[AuditKRCI v3.0] Upload completed, reportId:",s),R.info("ðŸ“„ Upload ConcluÃ­do!",{description:"Iniciando auditoria automÃ¡tica...",duration:3e3}),setTimeout(()=>{I.mutate({reportId:s,auditType:"full"})},500)},p=s=>{console.log("[AuditKRCI v3.0] Selected audit from history:",s.auditId),c(s),i("upload"),setTimeout(()=>{const n=document.getElementById("audit-results-section");n&&n.scrollIntoView({behavior:"smooth",block:"start"})},200)};return e.jsxs(te,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:168",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:169",className:"container mx-auto p-6 space-y-6 max-w-7xl",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:171",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:172",children:[e.jsxs("h1",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:173",className:"text-4xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(D,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:174",className:"h-10 w-10 text-blue-600"}),"Auditoria & KRCI"]}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:177",className:"text-gray-600 mt-2 text-lg",children:"VerificaÃ§Ã£o automÃ¡tica de conformidade com 22 regras de auditoria KRCI"})]}),e.jsxs(C,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:181",onClick:()=>a(!0),size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(j,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:186",className:"mr-2 h-5 w-5"}),"Fazer Upload"]})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:192",className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:193",children:[e.jsx(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:194",className:"pb-3",children:e.jsx(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:195",className:"text-sm font-medium text-gray-600",children:"Auditorias Completas"})}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:199",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:200",className:"flex items-center gap-3",children:[e.jsx(y,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:201",className:"h-8 w-8 text-green-600"}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:202",className:"text-3xl font-bold text-gray-900",children:o.data?.length||0})]})})]}),e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:209",children:[e.jsx(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:210",className:"pb-3",children:e.jsx(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:211",className:"text-sm font-medium text-gray-600",children:"Score MÃ©dio"})}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:215",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:216",className:"flex items-center gap-3",children:[e.jsx(le,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:217",className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:218",className:"text-3xl font-bold text-gray-900",children:[o.data&&o.data.length>0?Math.round(o.data.reduce((s,n)=>s+n.score,0)/o.data.length):0,"%"]})]})})]}),e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:231",children:[e.jsx(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:232",className:"pb-3",children:e.jsx(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:233",className:"text-sm font-medium text-gray-600",children:"RelatÃ³rios Prontos"})}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:237",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:238",className:"flex items-center gap-3",children:[e.jsx(ce,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:239",className:"h-8 w-8 text-blue-600"}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:240",className:"text-3xl font-bold text-gray-900",children:"0"})]})})]})]}),e.jsxs(ee,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:247",value:h,onValueChange:s=>i(s),children:[e.jsxs(se,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:248",className:"grid w-full grid-cols-2",children:[e.jsx(P,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:249",value:"upload",children:"Upload de Documento"}),e.jsx(P,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:250",value:"history",children:"Auditorias Recentes"})]}),e.jsxs(S,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:254",value:"upload",className:"space-y-6 mt-6",children:[!l&&!r&&e.jsx(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:257",className:"border-2 border-dashed border-gray-300",children:e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:258",className:"pt-12 pb-12",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:259",className:"text-center",children:[e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:260",className:"mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(j,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:261",className:"h-12 w-12 text-blue-600"})}),e.jsx("h3",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:263",className:"text-2xl font-semibold text-gray-900 mb-3",children:"FaÃ§a Upload do Seu RelatÃ³rio"}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:266",className:"text-gray-600 mb-8 text-lg max-w-md mx-auto",children:"Selecione um arquivo PDF para iniciar a auditoria automÃ¡tica de conformidade KRCI"}),e.jsxs(C,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:269",onClick:()=>a(!0),size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx($,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:274",className:"mr-2 h-5 w-5"}),"Selecionar Arquivo PDF"]})]})})}),r&&e.jsxs(Y,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:284",className:"border-blue-200 bg-blue-50",children:[e.jsx(N,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:285",className:"h-5 w-5 animate-spin text-blue-600"}),e.jsx(Z,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:286",className:"ml-2",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:287",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:288",children:[e.jsx("strong",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:289",className:"text-blue-900",children:"Processando Auditoria..."}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:290",className:"text-blue-700 mt-1",children:"Analisando documento e verificando conformidade com 22 critÃ©rios KRCI. Isso pode levar alguns segundos."})]}),e.jsx(Ae,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:295",value:66,className:"h-2"})]})})]}),l&&e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:303",id:"audit-results-section",className:"space-y-6",children:[e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:305",className:"border-2 border-green-500 bg-gradient-to-br from-green-50 to-emerald-50",children:[e.jsx(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:306",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:307",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:308",className:"flex-1",children:[e.jsx(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:309",className:"text-3xl font-bold text-green-900 mb-2",children:"Resultado da Auditoria"}),e.jsx(f,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:312",className:"text-green-700 text-base",children:new Date(l.createdAt).toLocaleString("pt-BR",{dateStyle:"long",timeStyle:"short"})})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:319",className:"text-center bg-white rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:320",className:"text-6xl font-bold text-green-600 mb-2",children:[l.score,"%"]}),e.jsx(b,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:323",variant:"default",className:"bg-green-600 text-white",children:"Score Geral"})]})]})}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:329",children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:330",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:331",className:"bg-white rounded-lg p-5 text-center shadow-sm",children:[e.jsx(D,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:332",className:"mx-auto h-10 w-10 text-blue-600 mb-3"}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:333",className:"text-3xl font-bold text-gray-900 mb-1",children:l.totalRules}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:336",className:"text-sm text-gray-600 font-medium",children:"Total de CritÃ©rios"})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:338",className:"bg-white rounded-lg p-5 text-center shadow-sm",children:[e.jsx(y,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:339",className:"mx-auto h-10 w-10 text-green-600 mb-3"}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:340",className:"text-3xl font-bold text-green-600 mb-1",children:l.passedRules}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:343",className:"text-sm text-gray-600 font-medium",children:"Atendidos"})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:345",className:"bg-white rounded-lg p-5 text-center shadow-sm",children:[e.jsx(T,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:346",className:"mx-auto h-10 w-10 text-red-600 mb-3"}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:347",className:"text-3xl font-bold text-red-600 mb-1",children:l.failedRules}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:350",className:"text-sm text-gray-600 font-medium",children:"NÃ£o Atendidos"})]})]})})]}),e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:357",children:[e.jsxs(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:358",children:[e.jsxs(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:359",className:"text-2xl",children:["CritÃ©rios Verificados (",l.krcis?.length||0,")"]}),e.jsx(f,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:362",className:"text-base",children:"Detalhamento completo de cada critÃ©rio KRCI analisado"})]}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:366",children:e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:367",className:"space-y-4",children:l.krcis?.map((s,n)=>e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:369",className:`p-5 rounded-xl border-2 transition-all ${s.passed?"border-green-300 bg-green-50 hover:bg-green-100":"border-red-300 bg-red-50 hover:bg-red-100"}`,children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:377",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:378",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:379",className:"flex items-center gap-3 mb-3",children:[s.passed?e.jsx(y,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:381",className:"h-6 w-6 text-green-600 flex-shrink-0"}):e.jsx(T,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:383",className:"h-6 w-6 text-red-600 flex-shrink-0"}),e.jsx("h4",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:385",className:"font-bold text-lg text-gray-900",children:s.section})]}),e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:387",className:"ml-9",children:[e.jsxs("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:388",className:"text-sm text-gray-700 mb-3",children:[e.jsx("strong",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:389",children:"Score:"})," ",s.score,"%"]}),s.keywords&&s.keywords.length>0&&e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:392",className:"flex flex-wrap gap-2",children:s.keywords.map((O,q)=>e.jsx(b,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:394",variant:"secondary",className:"text-xs",children:O},q))})]})]}),e.jsx(b,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:402",variant:s.passed?"default":"destructive",className:"ml-4 text-sm px-4 py-1",children:s.passed?"âœ“ Atende":"âœ— NÃ£o Atende"})]})},n))})})]}),l.recommendations&&l.recommendations.length>0&&e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:417",className:"border-yellow-300 bg-yellow-50",children:[e.jsxs(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:418",children:[e.jsxs(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:419",className:"text-2xl flex items-center gap-2",children:[e.jsx(oe,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:420",className:"h-6 w-6 text-yellow-600"}),"RecomendaÃ§Ãµes (",l.recommendations.length,")"]}),e.jsx(f,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:423",className:"text-base text-yellow-800",children:"SugestÃµes para melhorar a conformidade do relatÃ³rio"})]}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:427",children:e.jsx("ul",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:428",className:"space-y-3",children:l.recommendations.map((s,n)=>e.jsxs("li",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:430",className:"flex items-start gap-3",children:[e.jsx("span",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:431",className:"text-yellow-600 text-xl font-bold mt-1",children:"â€¢"}),e.jsx("span",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:432",className:"text-gray-800 text-base",children:s})]},n))})})]}),e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:441",className:"text-center pt-6",children:e.jsxs(C,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:442",onClick:()=>{c(null),a(!0)},size:"lg",variant:"outline",children:[e.jsx(j,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:450",className:"mr-2 h-5 w-5"}),"Nova Auditoria"]})})]})]}),e.jsx(S,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:459",value:"history",className:"space-y-6 mt-6",children:e.jsxs(m,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:460",children:[e.jsxs(g,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:461",children:[e.jsx(A,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:462",className:"text-2xl",children:"Auditorias Recentes"}),e.jsx(f,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:463",className:"text-base",children:"HistÃ³rico completo de auditorias realizadas"})]}),e.jsx(x,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:467",children:o.isLoading?e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:469",className:"text-center py-12",children:[e.jsx(N,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:470",className:"mx-auto h-12 w-12 text-gray-400 animate-spin mb-4"}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:471",className:"text-gray-600",children:"Carregando auditorias..."})]}):!o.data||o.data.length===0?e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:474",className:"text-center py-16",children:[e.jsx(re,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:475",className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:476",className:"text-gray-600 text-lg mb-4",children:"Nenhuma auditoria realizada ainda"}),e.jsxs(C,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:477",onClick:()=>a(!0),children:[e.jsx(j,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:478",className:"mr-2 h-4 w-4"}),"Fazer Primeira Auditoria"]})]}):e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:483",className:"space-y-4",children:o.data.map(s=>e.jsx("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:485",className:"p-5 border-2 rounded-xl hover:bg-gray-50 cursor-pointer transition-all hover:border-blue-300",onClick:()=>p(s),children:e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:490",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:491",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:492",className:"flex items-center gap-3 mb-2",children:[e.jsx(de,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:493",className:"h-6 w-6 text-blue-600"}),e.jsxs("h4",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:494",className:"font-bold text-lg text-gray-900",children:["Auditoria #",s.auditId.slice(-8).toUpperCase()]}),e.jsxs(b,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:497",variant:s.score>=80?"default":"secondary",className:"text-sm",children:[s.score,"%"]})]}),e.jsxs("p",{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:504",className:"text-sm text-gray-600 ml-9",children:[new Date(s.createdAt).toLocaleString("pt-BR")," â€¢"," ",s.passedRules,"/",s.totalRules," critÃ©rios atendidos"]})]}),e.jsx(C,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:509",variant:"outline",size:"sm",children:"Ver Detalhes"})]})},s.auditId))})})]})})]})]}),e.jsx(Ce,{"data-loc":"client/src/modules/technical-reports/pages/AuditKRCI.tsx:524",isOpen:t,onClose:()=>a(!1),onUploadComplete:K})]})}export{ve as default};
