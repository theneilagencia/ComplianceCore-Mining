import{j as e}from"./ui.CMOn6A-A.js";import{u as y,a}from"./vendor.DqptLLSw.js";import{D as b}from"./DashboardLayout.BMyonFam.js";import"./index.DqphIITB.js";import"./trpc.DEyng-9d.js";import"./icons.2ttFni2B.js";const k="";function A(){const[,i]=y(),[d,S]=a.useState([]),[f,j]=a.useState(null),[N,x]=a.useState(""),[u,c]=a.useState(!0),[o,h]=a.useState(""),[r,l]=a.useState([]),[m,g]=a.useState(!1);a.useEffect(()=>{v()},[]);const v=async()=>{try{const t=await fetch(`${k}/api/support/manuals`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch manuals");const s=await t.json();S(s.manuals),s.manuals.length>0&&n(s.manuals[0])}catch(t){console.error("Error fetching manuals:",t)}finally{c(!1)}},n=async t=>{j(t),c(!0),h(""),l([]);try{const s=await fetch(`/api/support/manual/${t.id}?format=html`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch manual content");const p=await s.json();x(p.manual.content)}catch(s){console.error("Error fetching manual content:",s),x("<p>Erro ao carregar o manual. Tente novamente.</p>")}finally{c(!1)}},w=async t=>{if(h(t),t.trim().length<3){l([]);return}g(!0);try{const s=await fetch(`/api/support/search?q=${encodeURIComponent(t)}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to search");const p=await s.json();l(p.results)}catch(s){console.error("Error searching:",s),l([])}finally{g(!1)}};return u&&d.length===0?e.jsx(b,{"data-loc":"client/src/pages/Support.tsx:130",children:e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:131",className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:132",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(b,{"data-loc":"client/src/pages/Support.tsx:139",children:e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:140",className:"flex h-screen bg-[#000020]",children:[e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:142",className:"w-80 bg-white/5 border-r border-white/20 overflow-y-auto",children:[e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:144",className:"p-6 border-b border-white/20",children:[e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:145",className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:146",className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/pages/Support.tsx:147",className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"data-loc":"client/src/pages/Support.tsx:148",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:151",children:[e.jsx("h1",{"data-loc":"client/src/pages/Support.tsx:152",className:"text-xl font-bold text-white",children:"Central de Suporte"}),e.jsx("p",{"data-loc":"client/src/pages/Support.tsx:153",className:"text-sm text-gray-400",children:"Manuais e Documentação"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:158",className:"relative",children:[e.jsx("input",{"data-loc":"client/src/pages/Support.tsx:159",type:"text",placeholder:"Buscar na documentação...",value:o,onChange:t=>w(t.target.value),className:"w-full px-4 py-2 pl-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),e.jsx("svg",{"data-loc":"client/src/pages/Support.tsx:166",className:"absolute left-3 top-2.5 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"data-loc":"client/src/pages/Support.tsx:167",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m&&e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:170",className:"absolute right-3 top-2.5",children:e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:171",className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]}),o.length>=3&&r.length>0&&e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:179",className:"p-4 border-b border-white/20 bg-yellow-50",children:[e.jsxs("p",{"data-loc":"client/src/pages/Support.tsx:180",className:"text-sm font-semibold text-white mb-2",children:[r.length," resultado",r.length>1?"s":""," encontrado",r.length>1?"s":""]}),e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:183",className:"space-y-2",children:r.map((t,s)=>e.jsxs("button",{"data-loc":"client/src/pages/Support.tsx:185",onClick:()=>n(t.manual),className:"w-full text-left p-2 bg-white/5 rounded hover:bg-[#000020] transition-colors",children:[e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:190",className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:191",className:"text-lg",children:t.manual.icon}),e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:192",className:"text-sm font-medium text-white",children:t.manual.title})]}),e.jsxs("p",{"data-loc":"client/src/pages/Support.tsx:194",className:"text-xs text-gray-400 line-clamp-2",children:[t.totalMatches," ocorrência",t.totalMatches>1?"s":""]})]},s))})]}),o.length>=3&&r.length===0&&!m&&e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:204",className:"p-4 border-b border-white/20 bg-[#000020]",children:e.jsxs("p",{"data-loc":"client/src/pages/Support.tsx:205",className:"text-sm text-gray-400 text-center",children:['Nenhum resultado encontrado para "',o,'"']})}),o.length<3&&e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:213",className:"p-4",children:[e.jsx("h2",{"data-loc":"client/src/pages/Support.tsx:214",className:"text-sm font-semibold text-gray-300 mb-3 uppercase",children:"Manuais"}),e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:215",className:"space-y-2",children:d.map(t=>e.jsx("button",{"data-loc":"client/src/pages/Support.tsx:217",onClick:()=>n(t),className:`w-full text-left p-3 rounded-lg transition-colors ${f?.id===t.id?"bg-blue-50 border-2 border-blue-500":"bg-white/5 border-2 border-transparent hover:bg-[#000020]"}`,children:e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:226",className:"flex items-center gap-3",children:[e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:227",className:"text-2xl",children:t.icon}),e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:228",className:"flex-1",children:[e.jsx("h3",{"data-loc":"client/src/pages/Support.tsx:229",className:"text-sm font-semibold text-white",children:t.title}),e.jsx("p",{"data-loc":"client/src/pages/Support.tsx:230",className:"text-xs text-gray-400 line-clamp-2",children:t.description})]})]})},t.id))})]}),e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:240",className:"p-4 border-t border-white/20",children:[e.jsx("h2",{"data-loc":"client/src/pages/Support.tsx:241",className:"text-sm font-semibold text-gray-300 mb-3 uppercase",children:"Links Rápidos"}),e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:242",className:"space-y-2",children:[e.jsx("button",{"data-loc":"client/src/pages/Support.tsx:243",onClick:()=>i("/help"),className:"w-full text-left p-2 rounded hover:bg-[#000020] transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:247",className:"flex items-center gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:248",className:"text-lg"}),e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:249",className:"text-sm text-gray-300",children:"Ajuda & FAQs"})]})}),e.jsx("a",{"data-loc":"client/src/pages/Support.tsx:252",href:"mailto:suporte@qivo-mining.com",className:"block w-full text-left p-2 rounded hover:bg-[#000020] transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:256",className:"flex items-center gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:257",className:"text-lg"}),e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:258",className:"text-sm text-gray-300",children:"Email Suporte"})]})}),e.jsx("button",{"data-loc":"client/src/pages/Support.tsx:261",onClick:()=>i("/dashboard"),className:"w-full text-left p-2 rounded hover:bg-[#000020] transition-colors",children:e.jsxs("div",{"data-loc":"client/src/pages/Support.tsx:265",className:"flex items-center gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:266",className:"text-lg"}),e.jsx("span",{"data-loc":"client/src/pages/Support.tsx:267",className:"text-sm text-gray-300",children:"Voltar ao Dashboard"})]})})]})]})]}),e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:275",className:"flex-1 overflow-y-auto",children:e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:276",className:"max-w-4xl mx-auto p-8",children:u?e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:278",className:"flex items-center justify-center py-12",children:e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:279",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{"data-loc":"client/src/pages/Support.tsx:282",className:`prose prose-slate max-w-none
 prose-headings:text-white prose-headings:font-bold
 prose-h1:text-3xl prose-h1:mb-4
 prose-h2:text-2xl prose-h2:mt-8 prose-h2:mb-4
 prose-h3:text-xl prose-h3:mt-6 prose-h3:mb-3
 prose-p:text-gray-300 prose-p:leading-relaxed
 prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
 prose-strong:text-white prose-strong:font-semibold
 prose-ul:list-disc prose-ul:pl-6
 prose-ol:list-decimal prose-ol:pl-6
 prose-li:text-gray-300
 prose-code:bg-[#171a4a] prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm
 prose-pre:bg-slate-900 prose-pre:text-slate-100
 prose-blockquote:border-l-4 prose-blockquote:border-blue-500 prose-blockquote:pl-4 prose-blockquote:italic
 prose-table:border prose-table:border-slate-300
 prose-th:bg-[#171a4a] prose-th:p-2 prose-th:border prose-th:border-slate-300
 prose-td:p-2 prose-td:border prose-td:border-slate-300`,dangerouslySetInnerHTML:{__html:N}})})})]})})}export{A as default};
