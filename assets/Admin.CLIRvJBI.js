import{j as e}from"./ui.CMOn6A-A.js";import{u as X,a}from"./vendor.DqptLLSw.js";import{j as Y,U as N,o as Z,h as U,f as ee,d as se}from"./icons.2ttFni2B.js";const c="";function ie(){const[,h]=X(),[r,P]=a.useState("dashboard"),[m,$]=a.useState(null),[D,M]=a.useState([]),[O,L]=a.useState([]),[j,y]=a.useState(null),[n,v]=a.useState(null),[f,k]=a.useState(null),[I,o]=a.useState(!0),[w,F]=a.useState(""),[x,u]=a.useState(null),[B,b]=a.useState(!1),[V,C]=a.useState(!1),q=()=>C(!0),R=()=>C(!1),[i,p]=a.useState({email:"",fullName:"",password:"",plan:"START"});a.useEffect(()=>{z()},[]),a.useEffect(()=>{r==="dashboard"?S():r==="users"?A():r==="sales"?G():r==="costs"&&J()},[r]);const z=async()=>{try{const s=await fetch(`${c}/api/admin/stats`,{credentials:"include"});if(s.status===403||s.status===401){alert("Acesso negado! Apenas administradores podem acessar este painel."),h("/dashboard");return}if(!s.ok)throw new Error("Failed to verify admin access");S()}catch(s){console.error("Admin access check failed:",s),h("/dashboard")}},S=async()=>{o(!0);try{const[s,t,l,g]=await Promise.all([fetch(`${c}/api/admin/stats`,{credentials:"include"}),fetch(`${c}/api/admin/revenue`,{credentials:"include"}),fetch(`${c}/api/admin/costs`,{credentials:"include"}),fetch(`${c}/api/admin/profit`,{credentials:"include"})]);s.ok&&$(await s.json()),t.ok&&y(await t.json()),l.ok&&v(await l.json()),g.ok&&k(await g.json())}catch(s){console.error("Error fetching dashboard data:",s)}finally{o(!1)}},A=async()=>{o(!0);try{const s=await fetch(`${c}/api/admin/users?limit=100`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch users");const t=await s.json();M(t.users)}catch(s){console.error("Error fetching users:",s)}finally{o(!1)}},G=async()=>{o(!0);try{const[s,t]=await Promise.all([fetch(`${c}/api/admin/subscriptions`,{credentials:"include"}),fetch(`${c}/api/admin/revenue`,{credentials:"include"})]);if(s.ok){const l=await s.json();L(l.subscriptions)}t.ok&&y(await t.json())}catch(s){console.error("Error fetching sales data:",s)}finally{o(!1)}},J=async()=>{o(!0);try{const[s,t]=await Promise.all([fetch(`${c}/api/admin/costs`,{credentials:"include"}),fetch(`${c}/api/admin/profit`,{credentials:"include"})]);s.ok&&v(await s.json()),t.ok&&k(await t.json())}catch(s){console.error("Error fetching costs data:",s)}finally{o(!1)}},Q=async(s,t,l,g)=>{try{if(!(await fetch(`${c}/api/admin/users/${s}/license`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:t,status:l})})).ok)throw new Error("Failed to update license");g&&g.trim()&&((await fetch(`${c}/api/admin/users/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({fullName:g.trim()})})).ok||console.warn("Failed to update user name")),alert("Usuário atualizado com sucesso!"),b(!1),u(null),A()}catch(T){console.error("Error updating user:",T),alert("Erro ao atualizar usuário")}},_=async s=>{if(confirm("Tem certeza que deseja excluir este usuário? Esta ação não pode ser desfeita."))try{if(!(await fetch(`${c}/api/admin/users/${s}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete user");alert("Usuário excluído com sucesso!"),b(!1),u(null),A()}catch(t){console.error("Error deleting user:",t),alert("Erro ao excluir usuário")}},H=async s=>{if(confirm("Deseja enviar um email com instruções para resetar a senha?"))try{if(!(await fetch(`${c}/api/admin/users/${s}/reset-password`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to reset password");alert("Email de reset de senha enviado com sucesso!")}catch(t){console.error("Error resetting password:",t),alert("Erro ao resetar senha")}},K=async()=>{if(!i.email||!i.password){alert("Email e senha são obrigatórios");return}try{console.log("[Admin] Creating user:",i.email);const s=await fetch(`${c}/api/admin/users`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)});if(!s.ok){const l=await s.json().catch(()=>({}));throw console.error("[Admin] Create user failed:",l),new Error(l.error||"Failed to create user")}const t=await s.json();console.log("[Admin] User created successfully:",t),alert("Usuário criado com sucesso!"),R(),p({email:"",fullName:"",password:"",plan:"START"}),setTimeout(()=>{console.log("[Admin] Reloading users list..."),A()},500)}catch(s){console.error("[Admin] Error creating user:",s),alert(`Erro ao criar usuário: ${s.message||"Erro desconhecido"}`)}},d=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"USD"}).format(s),E=s=>new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),W=D.filter(s=>s.email?.toLowerCase().includes(w.toLowerCase())||s.fullName?.toLowerCase().includes(w.toLowerCase()));return I&&r==="dashboard"?e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:362",className:"min-h-screen bg-gradient-to-br from-[#000020] via-[#171a4a] to-[#2f2c79] flex items-center justify-center",children:e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:363",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#7ed957]"})}):e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:369",className:"min-h-screen bg-gradient-to-br from-[#000020] via-[#171a4a] to-[#2f2c79]",children:[e.jsx("header",{"data-loc":"client/src/pages/Admin.tsx:371",className:"bg-white/5 backdrop-blur-md border-b border-white/20",children:e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:372",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:373",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:374",className:"flex items-center gap-4",children:[e.jsx("img",{"data-loc":"client/src/pages/Admin.tsx:375",src:"/assets/logo-Qivo.png",alt:"Qivo",className:"h-10"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:376",children:[e.jsx("h1",{"data-loc":"client/src/pages/Admin.tsx:377",className:"text-2xl font-bold text-white",children:"Painel de Administração"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:378",className:"text-sm text-gray-400",children:"Gerenciamento Completo da Plataforma"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:381",className:"flex items-center gap-3",children:[e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:382",onClick:()=>h("/dashboard"),className:"px-4 py-2 text-gray-300 hover:bg-white/10 rounded-lg transition-colors",children:"Voltar ao Dashboard"}),e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:388",onClick:()=>h("/login"),className:"px-4 py-2 bg-gradient-to-r from-[#8d4925] to-[#b96e48] text-white rounded-lg hover:opacity-90 transition-opacity",children:"Sair"})]})]})})}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:400",className:"bg-white/5 backdrop-blur-md border-b border-white/20",children:e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:401",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:402",className:"flex gap-6",children:[{id:"dashboard",label:"Dashboard",icon:Y},{id:"users",label:"Usuários",icon:N},{id:"sales",label:"Vendas",icon:Z},{id:"costs",label:"Custos",icon:U}].map(({id:s,label:t,icon:l})=>e.jsxs("button",{"data-loc":"client/src/pages/Admin.tsx:409",onClick:()=>P(s),className:`px-4 py-3 font-medium transition-all border-b-2 flex items-center gap-2 ${r===s?"border-[#7ed957] text-[#7ed957]":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(l,{"data-loc":"client/src/pages/Admin.tsx:418",className:"w-4 h-4"}),t]},s))})})}),e.jsxs("main",{"data-loc":"client/src/pages/Admin.tsx:427",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r==="dashboard"&&e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:430",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:432",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:433",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:434",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:435",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:436",className:"text-gray-400 text-sm",children:"Total de Usuários"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:437",className:"text-3xl font-bold text-white mt-2",children:m?.totalUsers||0})]}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:439",className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(N,{"data-loc":"client/src/pages/Admin.tsx:440",className:"w-6 h-6 text-blue-400"})})]}),e.jsxs("p",{"data-loc":"client/src/pages/Admin.tsx:443",className:"text-[#7ed957] text-sm mt-2",children:["+",m?.recentUsers||0," nos últimos 30 dias"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:446",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:447",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:448",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:449",className:"text-gray-400 text-sm",children:"MRR"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:450",className:"text-3xl font-bold text-white mt-2",children:d(m?.mrr||0)})]}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:452",className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ee,{"data-loc":"client/src/pages/Admin.tsx:453",className:"w-6 h-6 text-green-400"})})]}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:456",className:"text-gray-400 text-sm mt-2",children:"Receita Recorrente Mensal"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:459",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:460",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:461",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:462",className:"text-gray-400 text-sm",children:"Custos Mensais"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:463",className:"text-3xl font-bold text-white mt-2",children:d(n?.summary.totalCosts||0)})]}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:465",className:"w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center",children:e.jsx(U,{"data-loc":"client/src/pages/Admin.tsx:466",className:"w-6 h-6 text-red-400"})})]}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:469",className:"text-gray-400 text-sm mt-2",children:"Fixos + Variáveis"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:472",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:473",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:474",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:475",className:"text-gray-400 text-sm",children:"Lucro Líquido"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:476",className:"text-3xl font-bold text-white mt-2",children:d(f?.netProfit||0)})]}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:478",className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(se,{"data-loc":"client/src/pages/Admin.tsx:479",className:"w-6 h-6 text-purple-400"})})]}),e.jsxs("p",{"data-loc":"client/src/pages/Admin.tsx:482",className:"text-[#7ed957] text-sm mt-2",children:["Margem: ",f?.profitMargin.toFixed(1)||0,"%"]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:487",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:488",className:"text-lg font-semibold text-white mb-4",children:"Distribuição de Planos"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:489",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:490",className:"text-center",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:491",className:"text-4xl font-bold text-gray-400",children:m?.stats.startUsers||0}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:492",className:"text-sm text-gray-500 mt-1",children:"START"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:493",className:"text-xs text-gray-600",children:"Gratuito"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:495",className:"text-center",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:496",className:"text-4xl font-bold text-blue-400",children:m?.stats.proUsers||0}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:497",className:"text-sm text-blue-300 mt-1",children:"PRO"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:498",className:"text-xs text-gray-600",children:"US$ 899,00/mês"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:500",className:"text-center",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:501",className:"text-4xl font-bold text-[#b96e48]",children:m?.stats.enterpriseUsers||0}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:502",className:"text-sm text-[#8d4925] mt-1",children:"ENTERPRISE"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:503",className:"text-xs text-gray-600",children:"US$ 1.990,00/mês"})]})]})]})]}),r==="users"&&e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:512",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:513",className:"flex items-center justify-between",children:[e.jsx("h2",{"data-loc":"client/src/pages/Admin.tsx:514",className:"text-2xl font-bold text-white",children:"Usuários"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:515",className:"flex gap-3",children:[e.jsxs("button",{"data-loc":"client/src/pages/Admin.tsx:516",onClick:q,className:"px-6 py-3 bg-gradient-to-r from-[#7ed957] to-[#6bc247] text-white rounded-lg hover:opacity-90 transition-opacity font-medium flex items-center gap-2",children:[e.jsx(N,{"data-loc":"client/src/pages/Admin.tsx:520",className:"w-5 h-5"}),"Criar Novo Usuário"]}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:523",type:"text",placeholder:"Buscar por email ou nome...",value:w,onChange:s=>F(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#7ed957]"})]})]}),e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:533",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 overflow-hidden",children:e.jsxs("table",{"data-loc":"client/src/pages/Admin.tsx:534",className:"w-full",children:[e.jsx("thead",{"data-loc":"client/src/pages/Admin.tsx:535",className:"bg-white/10",children:e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:536",children:[e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:537",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Email"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:538",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:539",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:540",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:541",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Uso"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:542",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Criado em"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:543",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/Admin.tsx:546",className:"divide-y divide-white/10",children:W.map(s=>e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:548",className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:549",className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s.email}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:550",className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s.fullName||"-"}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:551",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/Admin.tsx:552",className:`px-2 py-1 rounded-full text-xs font-medium ${s.license?.plan==="ENTERPRISE"?"bg-[#8d4925]/20 text-[#b96e48]":s.license?.plan==="PRO"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:s.license?.plan||"START"})}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:560",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/Admin.tsx:561",className:`px-2 py-1 rounded-full text-xs font-medium ${s.license?.status==="active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.license?.status||"inactive"})}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:567",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:s.license?`${s.license.reportsUsed}/${s.license.reportsLimit}`:"-"}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:570",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:E(s.createdAt)}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:571",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:572",onClick:()=>{u(s),b(!0)},className:"px-3 py-1 bg-[#7ed957]/20 text-[#7ed957] rounded-lg hover:bg-[#7ed957]/30 transition-colors",children:"Editar"})})]},s.id))})]})})]}),r==="sales"&&e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:592",className:"space-y-6",children:[e.jsx("h2",{"data-loc":"client/src/pages/Admin.tsx:593",className:"text-2xl font-bold text-white",children:"Vendas e Assinaturas"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:596",className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:597",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:598",className:"text-gray-400 text-sm",children:"MRR"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:599",className:"text-3xl font-bold text-white mt-2",children:d(j?.mrr||0)}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:600",className:"text-gray-500 text-xs mt-1",children:"Receita Recorrente Mensal"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:602",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:603",className:"text-gray-400 text-sm",children:"ARR"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:604",className:"text-3xl font-bold text-white mt-2",children:d(j?.arr||0)}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:605",className:"text-gray-500 text-xs mt-1",children:"Receita Recorrente Anual"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:607",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:608",className:"text-gray-400 text-sm",children:"Assinaturas Ativas"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:609",className:"text-3xl font-bold text-white mt-2",children:j?.totalActiveSubscriptions||0}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:610",className:"text-gray-500 text-xs mt-1",children:"Total de clientes pagantes"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:615",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 overflow-hidden",children:[e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:616",className:"px-6 py-4 border-b border-white/10",children:e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:617",className:"text-lg font-semibold text-white",children:"Assinaturas Ativas"})}),e.jsxs("table",{"data-loc":"client/src/pages/Admin.tsx:619",className:"w-full",children:[e.jsx("thead",{"data-loc":"client/src/pages/Admin.tsx:620",className:"bg-white/10",children:e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:621",children:[e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:622",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Usuário"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:623",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:624",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:625",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Uso"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:626",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Criado em"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:627",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Stripe ID"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/Admin.tsx:630",className:"divide-y divide-white/10",children:O.map(s=>e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:632",className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:633",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:634",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:635",className:"text-white",children:s.userName||"-"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:636",className:"text-gray-400 text-xs",children:s.userEmail})]})}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:639",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/Admin.tsx:640",className:`px-2 py-1 rounded-full text-xs font-medium ${s.plan==="ENTERPRISE"?"bg-[#8d4925]/20 text-[#b96e48]":s.plan==="PRO"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:s.plan})}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:648",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/Admin.tsx:649",className:"px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:s.status})}),e.jsxs("td",{"data-loc":"client/src/pages/Admin.tsx:653",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:[s.reportsUsed,"/",s.reportsLimit," relatórios"]}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:656",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:E(s.createdAt)}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:657",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 font-mono text-xs",children:s.stripeSubscriptionId||"-"})]},s.licenseId))})]})]})]}),r==="costs"&&e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:670",className:"space-y-6",children:[e.jsx("h2",{"data-loc":"client/src/pages/Admin.tsx:671",className:"text-2xl font-bold text-white",children:"Custos e Despesas"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:674",className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:675",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:676",className:"text-gray-400 text-sm",children:"Custos Fixos"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:677",className:"text-3xl font-bold text-white mt-2",children:d(n?.summary.fixedCosts||0)}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:678",className:"text-gray-500 text-xs mt-1",children:"Mensais"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:680",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:681",className:"text-gray-400 text-sm",children:"Custos Variáveis"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:682",className:"text-3xl font-bold text-white mt-2",children:d(n?.summary.variableCosts||0)}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:683",className:"text-gray-500 text-xs mt-1",children:"Baseado em uso"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:685",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:686",className:"text-gray-400 text-sm",children:"Total de Custos"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:687",className:"text-3xl font-bold text-white mt-2",children:d(n?.summary.totalCosts||0)}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:688",className:"text-gray-500 text-xs mt-1",children:"Fixos + Variáveis"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:690",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:691",className:"text-gray-400 text-sm",children:"Margem Operacional"}),e.jsxs("p",{"data-loc":"client/src/pages/Admin.tsx:692",className:"text-3xl font-bold text-white mt-2",children:[f?.profitMargin.toFixed(1)||0,"%"]}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:693",className:"text-gray-500 text-xs mt-1",children:"Lucro / Receita"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:698",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 overflow-hidden",children:[e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:699",className:"px-6 py-4 border-b border-white/10",children:e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:700",className:"text-lg font-semibold text-white",children:"Detalhamento por Serviço"})}),e.jsxs("table",{"data-loc":"client/src/pages/Admin.tsx:702",className:"w-full",children:[e.jsx("thead",{"data-loc":"client/src/pages/Admin.tsx:703",className:"bg-white/10",children:e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:704",children:[e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:705",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Serviço"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:706",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Categoria"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:707",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Custo Fixo"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:708",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Custo Variável"}),e.jsx("th",{"data-loc":"client/src/pages/Admin.tsx:709",className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Descrição"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/Admin.tsx:712",className:"divide-y divide-white/10",children:n?.costs.map((s,t)=>e.jsxs("tr",{"data-loc":"client/src/pages/Admin.tsx:714",className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:715",className:"px-6 py-4 whitespace-nowrap text-sm text-white font-medium",children:s.service}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:716",className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{"data-loc":"client/src/pages/Admin.tsx:717",className:`px-2 py-1 rounded-full text-xs font-medium ${s.category==="infrastructure"?"bg-blue-500/20 text-blue-400":s.category==="ai"?"bg-purple-500/20 text-purple-400":s.category==="data"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:s.category})}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:726",className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s.monthlyCost>0?d(s.monthlyCost):"-"}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:729",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:s.variableCost>0?`${d(s.variableCost)}/unidade`:"-"}),e.jsx("td",{"data-loc":"client/src/pages/Admin.tsx:732",className:"px-6 py-4 text-sm text-gray-400",children:s.description})]},t))})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:740",className:"bg-white/5 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:741",className:"text-lg font-semibold text-white mb-4",children:"Métricas de Uso"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:742",className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:743",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:744",className:"text-gray-400 text-sm",children:"S3 Storage"}),e.jsxs("p",{"data-loc":"client/src/pages/Admin.tsx:745",className:"text-2xl font-bold text-white mt-1",children:[n?.usage.s3StorageGB||0," GB"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:747",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:748",className:"text-gray-400 text-sm",children:"OpenAI Tokens"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:749",className:"text-2xl font-bold text-white mt-1",children:(n?.usage.openaiTokens||0).toLocaleString()})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:751",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:752",className:"text-gray-400 text-sm",children:"Copernicus Requests"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:753",className:"text-2xl font-bold text-white mt-1",children:n?.usage.copernicusRequests||0})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:755",children:[e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:756",className:"text-gray-400 text-sm",children:"Mapbox Requests"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:757",className:"text-2xl font-bold text-white mt-1",children:(n?.usage.mapboxRequests||0).toLocaleString()})]})]})]})]})]}),B&&x&&e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:768",className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:769",className:"bg-[#171a4a] border border-white/20 rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:770",className:"text-xl font-bold text-white mb-4",children:"Editar Usuário"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:771",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:772",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:773",className:"block text-sm text-gray-400 mb-1",children:"Email"}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:774",type:"text",value:x.email,disabled:!0,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white opacity-60 cursor-not-allowed"}),e.jsx("p",{"data-loc":"client/src/pages/Admin.tsx:780",className:"text-xs text-gray-500 mt-1",children:"O email não pode ser alterado"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:782",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:783",className:"block text-sm text-gray-400 mb-1",children:"Nome Completo"}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:784",type:"text",defaultValue:x.fullName||"",id:"fullname-input",placeholder:"Nome completo do usuário",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#7ed957]"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:792",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:793",className:"block text-sm text-gray-400 mb-1",children:"Plano"}),e.jsxs("select",{"data-loc":"client/src/pages/Admin.tsx:794",defaultValue:x.license?.plan||"START",id:"plan-select",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:799",value:"START",children:"START"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:800",value:"PRO",children:"PRO"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:801",value:"ENTERPRISE",children:"ENTERPRISE"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:804",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:805",className:"block text-sm text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{"data-loc":"client/src/pages/Admin.tsx:806",defaultValue:x.license?.status||"active",id:"status-select",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:811",value:"active",children:"Ativo"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:812",value:"suspended",children:"Suspenso"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:813",value:"cancelled",children:"Cancelado"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:816",className:"space-y-3 mt-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:817",className:"flex gap-3",children:[e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:818",onClick:()=>{b(!1),u(null)},className:"flex-1 px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"Cancelar"}),e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:827",onClick:()=>{const s=document.getElementById("plan-select").value,t=document.getElementById("status-select").value,l=document.getElementById("fullname-input").value;Q(x.id,s,t,l)},className:"flex-1 px-4 py-2 bg-[#7ed957] text-white rounded-lg hover:opacity-90 transition-opacity",children:"Salvar Alterações"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:839",className:"flex gap-3",children:[e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:840",onClick:()=>H(x.id),className:"flex-1 px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors",children:"Resetar Senha"}),e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:846",onClick:()=>_(x.id),className:"flex-1 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"Excluir Usuário"})]})]})]})]})}),V&&e.jsx("div",{"data-loc":"client/src/pages/Admin.tsx:861",className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:862",className:"bg-[#171a4a] border border-white/20 rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/Admin.tsx:863",className:"text-xl font-bold text-white mb-4",children:"Criar Novo Usuário"}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:864",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:865",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:866",className:"block text-sm text-gray-400 mb-1",children:"Email *"}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:867",type:"email",value:i.email,onChange:s=>p({...i,email:s.target.value}),placeholder:"usuario@exemplo.com",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#7ed957]"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:875",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:876",className:"block text-sm text-gray-400 mb-1",children:"Nome Completo"}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:877",type:"text",value:i.fullName,onChange:s=>p({...i,fullName:s.target.value}),placeholder:"João Silva",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#7ed957]"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:885",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:886",className:"block text-sm text-gray-400 mb-1",children:"Senha *"}),e.jsx("input",{"data-loc":"client/src/pages/Admin.tsx:887",type:"password",value:i.password,onChange:s=>p({...i,password:s.target.value}),placeholder:"Mínimo 8 caracteres",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#7ed957]"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:895",children:[e.jsx("label",{"data-loc":"client/src/pages/Admin.tsx:896",className:"block text-sm text-gray-400 mb-1",children:"Plano"}),e.jsxs("select",{"data-loc":"client/src/pages/Admin.tsx:897",value:i.plan,onChange:s=>p({...i,plan:s.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#7ed957]",children:[e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:902",value:"START",children:"START (Gratuito)"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:903",value:"PRO",children:"PRO (US$ 899/mês)"}),e.jsx("option",{"data-loc":"client/src/pages/Admin.tsx:904",value:"ENTERPRISE",children:"ENTERPRISE (US$ 1.990/mês)"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Admin.tsx:907",className:"flex gap-3 mt-6",children:[e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:908",onClick:()=>{R(),p({email:"",fullName:"",password:"",plan:"START"})},className:"flex-1 px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",children:"Cancelar"}),e.jsx("button",{"data-loc":"client/src/pages/Admin.tsx:917",onClick:K,className:"flex-1 px-4 py-2 bg-[#7ed957] text-white rounded-lg hover:opacity-90 transition-opacity",children:"Criar Usuário"})]})]})]})})]})}export{ie as default};
