import{j as t}from"./ui.CMOn6A-A.js";import{u as j,a as s}from"./vendor.DqptLLSw.js";import{u as A}from"./useApi.DSWxbJm1.js";import{u as w}from"./index.DqphIITB.js";import"./trpc.DEyng-9d.js";import"./icons.2ttFni2B.js";function S(){const[,c]=j(),{apiFetch:o}=A(),{logout:m}=w(),[l,g]=s.useState([]),[h,n]=s.useState(!0),[x,a]=s.useState(""),[i,u]=s.useState(!1);s.useEffect(()=>{d()},[]);const d=async()=>{try{n(!0),a("");const r=await(await o("/api/audits")).json();g(r.audits||[])}catch(e){a(e.message||"Não foi possível carregar as auditorias. Tente novamente.")}finally{n(!1)}},p=async()=>{try{u(!0),a(""),(await(await o("/api/audits",{method:"POST",body:JSON.stringify({title:"Nova Auditoria KRCI",type:"KRCI"})})).json()).success&&await d()}catch(e){a(e.message||"Erro ao criar auditoria. Tente novamente.")}finally{u(!1)}},b=e=>({pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[e]||"bg-[#171a4a] text-gray-800",f=e=>({pending:"Pendente",in_progress:"Em Progresso",completed:"Concluída",failed:"Falhou"})[e]||e;return h?t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:87",className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:88",className:"text-center",children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:89",className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-600 border-t-transparent mx-auto"}),t.jsx("p",{"data-loc":"client/src/pages/Audits.tsx:90",className:"mt-6 text-lg font-medium text-gray-300",children:"Carregando auditorias..."}),t.jsx("p",{"data-loc":"client/src/pages/Audits.tsx:91",className:"mt-2 text-sm text-gray-500",children:"Aguarde um momento"})]})}):t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:98",className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:100",className:"bg-white/5 shadow-sm border-b border-white/20",children:t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:101",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:102",className:"flex items-center justify-between",children:[t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:103",className:"flex items-center gap-4",children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:104",className:"w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"JI"}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:107",children:[t.jsx("h1",{"data-loc":"client/src/pages/Audits.tsx:108",className:"text-2xl font-bold text-white",children:"Auditorias KRCI"}),t.jsx("p",{"data-loc":"client/src/pages/Audits.tsx:109",className:"text-sm text-gray-400",children:"Key Risk and Critical Information"})]})]}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:112",className:"flex gap-3",children:[t.jsx("button",{"data-loc":"client/src/pages/Audits.tsx:113",onClick:()=>c("/dashboard"),className:"px-4 py-2 text-gray-300 hover:text-white font-medium transition-colors border border-white/20 rounded-lg hover:bg-[#000020]",children:"Voltar ao Dashboard"}),t.jsx("button",{"data-loc":"client/src/pages/Audits.tsx:119",onClick:()=>{m(),c("/login")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]})]})})}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:134",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:136",className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[t.jsx("svg",{"data-loc":"client/src/pages/Audits.tsx:137",className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{"data-loc":"client/src/pages/Audits.tsx:138",fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:140",className:"flex-1",children:[t.jsx("p",{"data-loc":"client/src/pages/Audits.tsx:141",className:"text-red-800 font-medium",children:x}),t.jsx("button",{"data-loc":"client/src/pages/Audits.tsx:142",onClick:d,className:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium underline",children:"Tentar novamente"})]})]}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:153",className:"mb-6 flex justify-between items-center",children:[t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:154",children:[t.jsx("h2",{"data-loc":"client/src/pages/Audits.tsx:155",className:"text-xl font-semibold text-white",children:"Minhas Auditorias"}),t.jsxs("p",{"data-loc":"client/src/pages/Audits.tsx:156",className:"text-sm text-gray-400 mt-1",children:[l.length," auditorias encontradas"]})]}),t.jsx("button",{"data-loc":"client/src/pages/Audits.tsx:158",onClick:p,disabled:i,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?t.jsxs(t.Fragment,{children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:165",className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Criando..."]}):t.jsx(t.Fragment,{children:"+ Nova Auditoria"})})]}),l.length===0?t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:176",className:"bg-white/5 rounded-xl shadow-sm border border-white/20 p-12 text-center",children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:177",className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{"data-loc":"client/src/pages/Audits.tsx:178",className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{"data-loc":"client/src/pages/Audits.tsx:179",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),t.jsx("h3",{"data-loc":"client/src/pages/Audits.tsx:182",className:"text-lg font-semibold text-white mb-2",children:"Nenhuma auditoria encontrada"}),t.jsx("p",{"data-loc":"client/src/pages/Audits.tsx:183",className:"text-gray-400 mb-6",children:"Comece criando sua primeira auditoria KRCI"}),t.jsx("button",{"data-loc":"client/src/pages/Audits.tsx:184",onClick:p,disabled:i,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Criando...":"Criar Primeira Auditoria"})]}):t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:193",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:195",className:"bg-white/5 rounded-xl shadow-sm border border-white/20 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>alert(`Visualizar auditoria: ${e.id}`),children:[t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:200",className:"flex items-start justify-between mb-4",children:[t.jsx("div",{"data-loc":"client/src/pages/Audits.tsx:201",className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{"data-loc":"client/src/pages/Audits.tsx:202",className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{"data-loc":"client/src/pages/Audits.tsx:203",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),t.jsx("span",{"data-loc":"client/src/pages/Audits.tsx:206",className:`px-3 py-1 rounded-full text-xs font-medium ${b(e.status)}`,children:f(e.status)})]}),t.jsx("h3",{"data-loc":"client/src/pages/Audits.tsx:210",className:"text-lg font-semibold text-white mb-2",children:e.title}),t.jsxs("p",{"data-loc":"client/src/pages/Audits.tsx:211",className:"text-sm text-gray-400 mb-4",children:["Tipo: ",e.type]}),t.jsxs("div",{"data-loc":"client/src/pages/Audits.tsx:212",className:"text-xs text-gray-500",children:[t.jsxs("p",{"data-loc":"client/src/pages/Audits.tsx:213",children:["Criado: ",new Date(e.createdAt).toLocaleDateString("pt-BR")]}),t.jsxs("p",{"data-loc":"client/src/pages/Audits.tsx:214",children:["Atualizado: ",new Date(e.updatedAt).toLocaleDateString("pt-BR")]})]})]},e.id))})]})]})}export{S as default};
